@model DataLayer.ViewModels.EmployeeMonthlyReportViewModel

@{
    ViewBag.Title = "Employee Monthly Report";
    var employees = ViewData["Employees"] as SelectList;
}

<h2>Employee Monthly Report  @* @ViewBag.DaysInMonth.ToString("F0") / @ViewBag.Month In Account *@ </h2>
<a asp-action="MultiReport">All Reports</a>

<form asp-action="EmployeeMonthlyReport" method="get">
    <div class="d-flex w-100 align-items-stretch">


            <select class="form-control" id="employeeId" name="employeeId" required>
                <option value="">Select Employee</option>
                @foreach (var employee in employees)
                {
                    <option value="@employee.Value">@employee.Text</option>
                }
            </select>


            <select style="height:100%" name="year" class="form-control h-100 form-control-sm" id="year">
                @for (int year = 2024; year <= 2050; year++)
                {
                    <option value="@year">@year</option>
                }
            </select>


            <input type="number" class="form-control" id="month" name="month" min="1" max="12" required />



            <button type="submit" class="btn btn-primary btn-block">Search</button>

    </div>
</form>



<div>
    <h3>Employee: @Model.EmployeeName</h3>
    <table border="1" cellpadding="5" cellspacing="0" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Basic Salary</td>
                <td>@Model.BasicSalary.ToString("C")</td>
            </tr>
            <tr>
                <td>Hour Price</td>
                <td>@Model.HourPrice?.ToString("C2")</td>
            </tr>
            <tr>
                <td>Attended Days</td>
                <td>@Model.AttendedDays</td>
            </tr>
            <tr>
                <td>Absent Days</td>
                <td>@Model.AbsentDays</td>
            </tr>
            <tr>
                <td>Total Bonuses (Hours)</td>
                <td>@Model.BonusesByHours</td>
            </tr>
            <tr>
                <td>Total Bonuses (Money)</td>
                <td>@Model.BonusesByMoney.ToString("C")</td>
            </tr>
            <tr>
                <td>Total Deductions (Hours)</td>
                <td>@Model.DeductionsByHours</td>
            </tr>
            <tr>
                <td>Total Deductions (Money)</td>
                <td>@Model.DeductionsByMoney.ToString("C")</td>
            </tr>
            <tr>
                <td><strong>Net Salary</strong></td>
                <td><strong>@Model.NetSalary.ToString("C2")</strong></td>
            </tr>
        </tbody>
    </table>
</div>

<h3>Daily Attendance Details</h3>
@if (Model.DailyDetails != null)
{
   

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Date</th>
                <th>Holiday</th>
                <th>Weekly Holiday</th>
                <th>Attended</th>
                <th>Arrival Time</th>
                <th>Departure Time</th>
                <th>Bonus</th>
                <th>Deduction</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var detail in Model.DailyDetails)
            {
                <tr>
                    <td>@detail.Date.ToString("yyyy-MM-dd")</td>
                    <td>@(detail.IsHoliday ? "Yes" : "")</td>
                    <td>@(detail.IsWeeklyHoliday ? "Yes" : "")</td>
                    <td>@(detail.Attended ? "Yes" : "No")</td>
                    <td>@(detail.ArrivalTime.HasValue ? detail.ArrivalTime.Value.ToString(@"hh\:mm") : "-")</td>
                    <td>@(detail.DepartureTime.HasValue ? detail.DepartureTime.Value.ToString(@"hh\:mm") : "-")</td>
                    <td>@detail.Bonus</td>
                    <td>@detail.Deduction</td>
                </tr>
            }
        </tbody>
    </table>
}